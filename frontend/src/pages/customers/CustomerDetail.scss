@import "../../styles/variables";

/* Dikey yazımı kapat */
.customer-detail-page, .customer-detail-page * {
  writing-mode: horizontal-tb !important;
  text-orientation: mixed !important;
}

.customer-detail-page {
  padding: 16px;

  /* HEADER */
  .header {
    display: grid;
    grid-template-columns: 1fr auto; /* solda kimlik+avatar, sağda aksiyonlar */
    gap: 12px;
    align-items: center;
    margin-bottom: 14px;

    /* SOL BLOK: başlık+presence + avatar */
    .identity {
      display: flex;
      align-items: center;
      gap: 16px;
      min-width: 0;

      .title-wrap {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        min-width: 0;

        .title {
          margin: 0;
          font-size: 22px;
          font-weight: 800;
          color: $color-dark;
          letter-spacing: .2px;
          white-space: nowrap;
          text-overflow: ellipsis;
          overflow: hidden;
          max-width: 48vw; /* çok uzun başlıklar taşmasın */
        }
        .presence {
          display: inline-flex; align-items: center; gap: 6px;
          padding: 4px 10px; border-radius: 999px; font-size: 12px; font-weight: 800; color: #fff;
          /* değişiklik: dot daima beyaz olsun ki renkli arka planda net görünsün */
          .dot { width: 8px; height: 8px; border-radius: 50%; background: #fff; opacity: .9; }
          &.status-online  { background: #10b981; }
          &.status-idle    { background: #f59e0b; }
          &.status-offline { background: #ef4444; }
        }
      }

      .avatar-stack {
        display: grid;
        justify-items: center;
        gap: 6px;

        .avatar-wrap {
          width: 110px; height: 110px; border-radius: 999px;
          min-width: 110px; /* değişiklik: küçük ekranlarda sıkışmasın */
          overflow: hidden; border: 1px solid #e5e7eb; background: #f3f4f6;
          img { width: 100%; height: 100%; object-fit: cover; display: block; }
        }

        .btn {
          height: 30px; padding: 0 10px; border-radius: 8px;
          border: 1px solid #e5e7eb; background: #fff; font-weight: 800; cursor: pointer;
          transition: transform .08s ease, box-shadow .15s ease;
          &:hover { box-shadow: 0 8px 16px rgba(0,0,0,.08); }
          &:active { transform: translateY(1px); }
          &:disabled { opacity: .6; cursor: not-allowed; }
          &.danger { background: #ef4444; border-color: #ef4444; color: #fff; }
          &:focus-visible { outline: 2px solid rgba($color-primary, .35); outline-offset: 2px; } /* erişilebilirlik */
        }
      }
    }

    /* SAĞ BLOK: aksiyon butonları */
    .actions {
      display: inline-flex; gap: 8px; justify-self: end;
      .btn {
        height: 36px; padding: 0 12px; border: 1px solid #e5e7eb; background: #fff; border-radius: 8px;
        cursor: pointer; font-weight: 700; transition: transform .08s ease, box-shadow .15s ease;
        &:hover { box-shadow: 0 8px 16px rgba(0,0,0,.08); }
        &:active { transform: translateY(1px); }
        &:focus-visible { outline: 2px solid rgba($color-primary, .35); outline-offset: 2px; }
      }
      .btn-edit   { background: #f59e0b; border-color: #f59e0b; color: #111; }
      .btn-danger { background: #ef4444; border-color: #ef4444; color: #fff; }
    }
  }

  /* Kart yapıları */
  .top-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 12px;
    margin-bottom: 12px;
  }

  .bottom-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 12px;
  }

  /* Mağazalar tablosu */
  .card.stores {
    .store-toolbar {
      display: flex; justify-content: flex-end; margin-bottom: 10px;
      .btn {
        height: 34px; padding: 0 12px; border-radius: 8px; border: 1px solid #e5e7eb; background:#fff; font-weight:700; cursor:pointer;
        &.primary { background: $color-primary; color: #fff; border-color: $color-primary; }
        /* değişiklik: hover tonu */
        &.primary:hover { filter: brightness(0.95); }
      }
    }
    
    .store-table td:nth-child(2) { color:#475569; font-variant-numeric: tabular-nums; }
    .store-table .badge.ok { background:#16a34a; }
    .store-table .badge.no { background:#9ca3af; }

    .store-table-wrap { overflow: auto; }

    .store-table {
      width: 100%; border-collapse: collapse; font-size: 14px;
      thead th { text-align: left; background: #f8fafc; padding: 10px 12px; border-bottom: 1px solid #edf2f7; white-space: nowrap; }
      tbody td { padding: 10px 12px; border-bottom: 1px solid #f1f5f9; white-space: nowrap; vertical-align: middle; }
      .strong { font-weight: 700; color: #111; }

      .actions .btn {
        height: 30px; padding: 0 10px; border-radius: 8px; border: 1px solid #e5e7eb; background:#fff; font-weight:700; cursor:pointer; margin-right: 6px;
        &.danger { background: #ef4444; border-color: #ef4444; color:#fff; }
        &:last-child { margin-right: 0; } /* değişiklik: son buton boşluğu */
      }
      .badge {
        display:inline-block; padding: 2px 8px; border-radius: 999px; font-size: 12px; font-weight: 700; color:#fff;
        &.ok { background:#10b981; }
        &.no { background:#9ca3af; }
      }
    }
  }

  .card {
    background: #fff; border: 1px solid #e5e7eb; border-radius: $border-radius; padding: 14px;

    .card-title {
      font-weight: 800; margin-bottom: 10px; color: rgba($color-dark,.92);
      border-left: 3px solid $color-primary; padding-left: 8px;
    }

    .kv {
      display: grid; grid-template-columns: 1fr; gap: 12px;

      > div {
        display: flex; flex-direction: column; align-items: flex-start; gap: 6px;
        padding: 10px 12px; background: #fafafa; border: 1px solid #edf2f7; border-radius: 10px;

        b   { color: #64748b; font-weight: 700; font-size: 13px; line-height: 1.35; }
        span{ display: block; color: #111; font-size: 14px; line-height: 1.4; overflow-wrap: anywhere; min-width: 0; }
        &.full { grid-column: 1 / -1; }
      }
    }

    .empty { padding: 12px; border: 1px dashed #e5e7eb; border-radius: 10px; background: #fafafa; color:#64748b; font-size: 13px; }
  }
}

/* Daha genişte kolonlar */
@media (min-width: 992px) {
  .customer-detail-page {
    .top-grid    { grid-template-columns: repeat(4, 1fr); }
    .bottom-grid { grid-template-columns: 2fr 1fr; align-items: start; }
  }
}

/* Küçük ekran: avatar alt satıra insin */
@media (max-width: 640px) {
  .customer-detail-page .header .identity {
    align-items: flex-start;
    gap: 10px;
    flex-wrap: wrap;

    .title-wrap { width: 100%; max-width: 100%; }
  }
}
