/* src/pages/mailer/VisitMailCompose.scss */

/* =========================
   THEME TOKENS
   ========================= */
:root {
  --bg:           #f8fafc;
  --card:         #ffffff;
  --text:         #0f172a;
  --muted:        #64748b;
  --border:       #e5e7eb;
  --soft-border:  #eef2f7;
  --primary:      #2563eb;
  --primary-600:  #2563eb;
  --primary-700:  #1d4ed8;
  --danger:       #ef4444;
  --success:      #16a34a;
  --warning:      #f59e0b;
  --ring:         rgba(37, 99, 235, 0.35);
  --shadow:       0 10px 20px rgba(2, 6, 23, 0.06), 0 2px 6px rgba(2, 6, 23, 0.06);
  --radius:       14px;
  --radius-sm:    10px;
  --radius-xs:    8px;
  --pad:          14px;
  --pad-lg:       18px;
  --pad-xl:       22px;
  --font-ui:      system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
  --font-mono:    ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
}

[data-theme="dark"] {
  --bg:           #0b1220;
  --card:         #0f172a;
  --text:         #e5e7eb;
  --muted:        #94a3b8;
  --border:       #1f2937;
  --soft-border:  #172032;
  --primary:      #60a5fa;
  --primary-600:  #60a5fa;
  --primary-700:  #3b82f6;
  --danger:       #f87171;
  --success:      #34d399;
  --warning:      #fbbf24;
  --ring:         rgba(96, 165, 250, 0.35);
  --shadow:       0 10px 22px rgba(0,0,0,.35), 0 2px 8px rgba(0,0,0,.35);
}

/* =========================
   PAGE LAYOUT
   ========================= */
.mail-compose-page {
  padding: 18px;
  margin: 0 auto;
  max-width: 1200px;
  font-family: var(--font-ui);
  color: var(--text);

  .page-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    margin-bottom: 14px;

    .title {
      font-size: clamp(18px, 2vw, 22px);
      font-weight: 700;
      letter-spacing: 0.2px;
    }

    .actions {
      display: flex;
      align-items: center;
      gap: 10px;
    }
  }

  /* Card shell */
  .card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
  }

  /* Header inside card */
  .card-head {
    padding: var(--pad-lg) var(--pad-lg) 12px;
    border-bottom: 1px solid var(--soft-border);
    display: flex;
    align-items: center;
    justify-content: space-between;

    .t {
      font-weight: 600;
      font-size: 15px;
    }
  }

  /* Body inside card */
  .card-body {
    padding: var(--pad-lg);
  }

  /* 2-column grid (editor | preview) */
  .grid-2 {
    display: grid;
    grid-template-columns: 7fr 5fr;
    gap: 16px;

    @media (max-width: 1100px) {
      grid-template-columns: 1fr;
    }

    .full { grid-column: 1 / -1; }
  }

  /* Sections (left/right column blocks) */
  .mc-section {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    box-shadow: var(--shadow);

    .sec-head {
      padding: var(--pad-lg);
      border-bottom: 1px solid var(--soft-border);
      font-weight: 600;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;

      .right {
        display: flex;
        align-items: center;
        gap: 8px;
      }
    }

    .sec-body {
      padding: var(--pad-lg);
    }
  }

  /* =========================
     FORM ELEMENTS
     ========================= */
  label {
    display: block;
    font-size: 12px;
    color: var(--muted);
    margin: 6px 0 6px;
  }

  input[type="text"],
  input[type="email"],
  input[type="search"],
  input[type="number"],
  select,
  textarea {
    width: 100%;
    background: transparent;
    border: 1px solid var(--border);
    border-radius: var(--radius-xs);
    padding: 10px 12px;
    font: 500 14px/1.4 var(--font-ui);
    color: var(--text);
    outline: none;
    transition: border-color .15s ease, box-shadow .15s ease, background .15s ease;

    &:focus {
      border-color: var(--primary-600);
      box-shadow: 0 0 0 4px var(--ring);
    }

    &::placeholder {
      color: var(--muted);
    }

    &:disabled {
      opacity: .65;
      cursor: not-allowed;
    }
  }

  textarea {
    min-height: 180px;
    resize: vertical;
    font-family: var(--font-mono);
    line-height: 1.6;
  }

  .subject-input {
    font-size: 15px;
    font-weight: 600;
  }

  .row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;

    @media (max-width: 680px) {
      grid-template-columns: 1fr;
    }
  }

  .muted { color: var(--muted); }

  /* =========================
     RECIPIENTS (chips)
     ========================= */
  .recipients {
    .chips {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 8px;
    }

    .chip {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 10px;
      background: color-mix(in srgb, var(--primary) 10%, transparent);
      border: 1px solid color-mix(in srgb, var(--primary) 35%, var(--border));
      color: var(--text);
      border-radius: 999px;
      font-size: 12.5px;
      font-weight: 600;

      .chip-name {
        opacity: .9;
      }

      .chip-remove {
        appearance: none;
        border: 0;
        background: transparent;
        cursor: pointer;
        font-size: 16px;
        line-height: 1;
        padding: 0 2px;
        color: var(--muted);

        &:hover { color: var(--danger); transform: scale(1.05); }
      }
    }

    .add-row {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 8px;

      .add-btn { white-space: nowrap; }
    }
  }

  /* =========================
     TYPE TABS (APPROVAL | SUMMARY)
     ========================= */
  .type-tabs {
    display: inline-flex;
    align-items: center;
    padding: 4px;
    border: 1px solid var(--border);
    border-radius: 999px;
    background: linear-gradient(
      180deg,
      color-mix(in srgb, var(--card) 80%, transparent),
      color-mix(in srgb, var(--card) 65%, transparent)
    );

    .tab {
      appearance: none;
      border: 0;
      background: transparent;
      padding: 8px 14px;
      border-radius: 999px;
      font: 600 13px/1 var(--font-ui);
      color: var(--muted);
      cursor: pointer;
      transition: background .15s ease, color .15s ease, transform .08s ease;

      &.active {
        background: var(--primary);
        color: #fff;
      }

      &:hover { transform: translateY(-0.5px); }
      &:active { transform: translateY(0); }
    }
  }

  /* =========================
     PREVIEW PANE
     ========================= */
  .preview-card {
    .preview-head {
      padding: var(--pad) var(--pad-lg);
      border-bottom: 1px dashed var(--soft-border);
      display: grid;
      gap: 6px;

      .subline {
        font-size: 12.5px;
        color: var(--muted);
        display: flex;
        align-items: center;
        gap: 10px;

        .dot {
          width: 8px; height: 8px; border-radius: 50%;
          background: var(--success);
        }
      }
    }

    .preview-body {
      padding: var(--pad-lg);
      background:
        linear-gradient(180deg, color-mix(in srgb, var(--card) 92%, transparent), transparent 120px),
        repeating-linear-gradient(
          0deg,
          transparent,
          transparent 28px,
          color-mix(in srgb, var(--soft-border) 75%, transparent) 28px,
          color-mix(in srgb, var(--soft-border) 75%, transparent) 29px
        );
      border-bottom-left-radius: var(--radius);
      border-bottom-right-radius: var(--radius);
      overflow: auto;
      max-height: 70vh;

      .mail-frame {
        background: var(--card);
        border: 1px solid var(--soft-border);
        border-radius: var(--radius-sm);
        padding: var(--pad-lg);
        box-shadow: var(--shadow);

        .mail-subject {
          font-weight: 700;
          margin-bottom: 10px;
        }

        .mail-html {
          border: 1px dashed var(--soft-border);
          border-radius: var(--radius-xs);
          padding: var(--pad);
          background: color-mix(in srgb, var(--card) 85%, transparent);

          /* optional: render raw html if you inject it */
          pre {
            white-space: pre-wrap;
            word-break: break-word;
            font-family: var(--font-mono);
            font-size: 12.5px;
            color: var(--text);
          }
        }
      }
    }
  }

  /* =========================
     BUTTONS
     ========================= */
  .btn {
    appearance: none;
    cursor: pointer;
    border: 1px solid var(--border);
    background: linear-gradient(180deg, #fff, color-mix(in srgb, var(--card) 85%, transparent));
    color: var(--text);
    font: 600 13.5px/1 var(--font-ui);
    padding: 10px 14px;
    border-radius: 10px;
    transition: transform .06s ease, box-shadow .15s ease, border-color .15s ease, background .15s ease;

    &:hover {
      box-shadow: var(--shadow);
      transform: translateY(-1px);
    }

    &:active { transform: translateY(0); }

    &.primary {
      background: var(--primary);
      color: #fff;
      border-color: color-mix(in srgb, var(--primary) 70%, black);

      &:hover {
        filter: brightness(1.02);
      }
    }

    &.ghost {
      background: transparent;
      border-color: var(--border);
      color: var(--text);

      &:hover { background: color-mix(in srgb, var(--card) 70%, transparent); }
    }

    &.danger {
      background: var(--danger);
      color: #fff;
      border-color: color-mix(in srgb, var(--danger) 70%, black);
    }

    &.link {
      background: transparent;
      border-color: transparent;
      color: var(--primary);
      padding-left: 0;
      padding-right: 0;

      &:hover { text-decoration: underline; box-shadow: none; transform: none; }
    }

    &:disabled {
      opacity: .6;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }
  }

  .btn-row {
    display: flex;
    align-items: center;
    gap: 10px;
    flex-wrap: wrap;
  }

  /* =========================
     INLINE HELP / BADGES
     ========================= */
  .badge {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 4px 8px;
    border-radius: 999px;
    border: 1px solid var(--border);
    font-size: 12px;
    font-weight: 700;
    color: var(--text);
    background: color-mix(in srgb, var(--card) 85%, transparent);

    &.ok    { border-color: color-mix(in srgb, var(--success) 55%, var(--border)); }
    &.warn  { border-color: color-mix(in srgb, var(--warning) 55%, var(--border)); }
    &.err   { border-color: color-mix(in srgb, var(--danger) 55%, var(--border)); }
  }

  /* =========================
     UTILITIES
     ========================= */
  .spacer { height: 10px; }
  .hr {
    height: 1px;
    background: var(--soft-border);
    margin: 10px 0;
    border-radius: 1px;
  }

  /* legacy selectors kept (so eski kod kırılmasın) */
  textarea { font-family: var(--font-mono); }
}

/* Narrow tweaks for mobile spacing */
@media (max-width: 680px) {
  .mail-compose-page {
    padding: 12px;

    .card-body,
    .mc-section .sec-body { padding: 12px; }

    .card-head,
    .mc-section .sec-head { padding: 12px; }
  }
}
